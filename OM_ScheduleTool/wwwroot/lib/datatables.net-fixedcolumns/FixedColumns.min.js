var $,dataTable;function setJQuery(t){dataTable=($=t).fn.dataTable}var FixedColumns=function(){function i(t,s){var e=this;if(!dataTable||!dataTable.versionCheck||!dataTable.versionCheck("1.10.0"))throw new Error("StateRestore requires DataTables 1.10 or newer");t=new dataTable.Api(t);this.classes=$.extend(!0,{},i.classes),this.c=$.extend(!0,{},i.defaults,s),void 0===s.left&&void 0!==this.c.leftColumns&&(this.c.left=this.c.leftColumns),void 0===s.right&&void 0!==this.c.rightColumns&&(this.c.right=this.c.rightColumns),this.s={barWidth:0,dt:t,rtl:"rtl"===$(t.table().node()).css("direction")};s={"background-color":"white",bottom:"0px",display:"block",position:"absolute",width:this.s.barWidth+1+"px"};return this.dom={leftBottomBlocker:$("<div>").css(s).css("left",0).addClass(this.classes.leftBottomBlocker),leftTopBlocker:$("<div>").css(s).css({left:0,top:0}).addClass(this.classes.leftTopBlocker),rightBottomBlocker:$("<div>").css(s).css("right",0).addClass(this.classes.rightBottomBlocker),rightTopBlocker:$("<div>").css(s).css({right:0,top:0}).addClass(this.classes.rightTopBlocker)},this.s.dt.settings()[0]._bInitComplete?(this._addStyles(),this._setKeyTableListener()):t.one("preInit.dt",function(){e._addStyles(),e._setKeyTableListener()}),t.settings()[0]._fixedColumns=this}return i.prototype.left=function(t){return void 0!==t&&(this.c.left=t,this._addStyles()),this.c.left},i.prototype.right=function(t){return void 0!==t&&(this.c.right=t,this._addStyles()),this.c.right},i.prototype._addStyles=function(){this.s.dt.settings()[0].oScroll.sY&&(i=$(this.s.dt.table().node()).closest("div.dataTables_scrollBody")[0],l=this.s.dt.settings()[0].oBrowser.barWidth,i.offsetWidth-i.clientWidth>=l?this.s.barWidth=l:this.s.barWidth=0,this.dom.rightTopBlocker.css("width",this.s.barWidth+1),this.dom.leftTopBlocker.css("width",this.s.barWidth+1),this.dom.rightBottomBlocker.css("width",this.s.barWidth+1),this.dom.leftBottomBlocker.css("width",this.s.barWidth+1));var t=null,s=this.s.dt.column(0).header(),e=null;null!==s&&(e=(s=$(s)).outerHeight()+1,t=$(s.closest("div.dataTables_scroll")).css("position","relative"));var i=this.s.dt.column(0).footer(),l=null;null!==i&&(l=(i=$(i)).outerHeight(),null===t&&(t=$(i.closest("div.dataTables_scroll")).css("position","relative")));for(var o=this.s.dt.columns().data().toArray().length,h=0,r=$(this.s.dt.table().node()).children("tbody").children("tr"),d=0,a=0;a<o;a++)if((B=this.s.dt.column(a)).visible()){var c=$(B.header()),f=$(B.footer());if(a<this.c.left){$(this.s.dt.table().node()).addClass(this.classes.tableFixedLeft),t.addClass(this.classes.tableFixedLeft),0!==a&&(b=this.s.dt.column(a-1)).visible()&&(h+=$(b.nodes()[0]).outerWidth());for(var n=0,g=r;n<g.length;n++){var u=g[n];$($(u).children()[a-d]).css(this._getCellCSS(!1,h,"left")).addClass(this.classes.fixedLeft)}c.css(this._getCellCSS(!0,h,"left")).addClass(this.classes.fixedLeft),f.css(this._getCellCSS(!0,h,"left")).addClass(this.classes.fixedLeft)}else{for(var p=0,m=r;p<m.length;p++){u=m[p];(y=$($(u).children()[a-d])).hasClass(this.classes.fixedLeft)&&y.css(this._clearCellCSS("left")).removeClass(this.classes.fixedLeft)}c.hasClass(this.classes.fixedLeft)&&c.css(this._clearCellCSS("left")).removeClass(this.classes.fixedLeft),f.hasClass(this.classes.fixedLeft)&&f.css(this._clearCellCSS("left")).removeClass(this.classes.fixedLeft)}}else d++;null===s||s.hasClass("index")||(this.s.rtl?(this.dom.leftTopBlocker.outerHeight(e),t.append(this.dom.leftTopBlocker)):(this.dom.rightTopBlocker.outerHeight(e),t.append(this.dom.rightTopBlocker))),null===i||i.hasClass("index")||(this.s.rtl?(this.dom.leftBottomBlocker.outerHeight(l),t.append(this.dom.leftBottomBlocker)):(this.dom.rightBottomBlocker.outerHeight(l),t.append(this.dom.rightBottomBlocker)));for(var C=0,a=o-1;0<=a;a--){var b,B=this.s.dt.column(a),c=$(B.header()),f=$(B.footer());if(a>=o-this.c.right){$(this.s.dt.table().node()).addClass(this.classes.tableFixedRight),t.addClass(this.classes.tableFixedLeft),a!==o-1&&(b=this.s.dt.column(a+1)).visible()&&(C+=$(b.nodes()[0]).outerWidth());for(var v=0,k=r;v<k.length;v++){u=k[v];$($(u).children()[a-d]).css(this._getCellCSS(!1,C,"right")).addClass(this.classes.fixedRight)}c.css(this._getCellCSS(!0,C,"right")).addClass(this.classes.fixedRight),f.css(this._getCellCSS(!0,C,"right")).addClass(this.classes.fixedRight)}else{for(var x=0,S=r;x<S.length;x++){var y,u=S[x];(y=$($(u).children()[a-d])).hasClass(this.classes.fixedRight)&&y.css(this._clearCellCSS("right")).removeClass(this.classes.fixedRight)}c.hasClass(this.classes.fixedRight)&&c.css(this._clearCellCSS("right")).removeClass(this.classes.fixedRight),f.hasClass(this.classes.fixedRight)&&f.css(this._clearCellCSS("right")).removeClass(this.classes.fixedRight)}}s&&(this.s.rtl?(this.dom.leftTopBlocker.outerHeight(e),t.append(this.dom.leftTopBlocker)):(this.dom.rightTopBlocker.outerHeight(e),t.append(this.dom.rightTopBlocker))),i&&(this.s.rtl?(this.dom.leftBottomBlocker.outerHeight(l),t.append(this.dom.leftBottomBlocker)):(this.dom.rightBottomBlocker.outerHeight(l),t.append(this.dom.rightBottomBlocker)))},i.prototype._getCellCSS=function(t,s,e){return"left"===e?this.s.rtl?{position:"sticky",right:s+(t?this.s.barWidth:0)+"px"}:{left:s+"px",position:"sticky"}:this.s.rtl?{left:s+"px",position:"sticky"}:{position:"sticky",right:s+(t?this.s.barWidth:0)+"px"}},i.prototype._clearCellCSS=function(t){return"left"===t?this.s.rtl?{position:"",right:""}:{left:"",position:""}:this.s.rtl?{left:"",position:""}:{position:"",right:""}},i.prototype._setKeyTableListener=function(){var d=this;this.s.dt.on("key-focus",function(t,s,e){var i,l,o,h=$(e.node()).offset(),r=$($(d.s.dt.table().node()).closest("div.dataTables_scrollBody"));0<d.c.left&&(i=(l=$(d.s.dt.column(d.c.left-1).header())).offset(),l=l.outerWidth(),h.left<i.left+l&&(o=r.scrollLeft(),r.scrollLeft(o-(i.left+l-h.left)))),0<d.c.right&&(l=d.s.dt.columns().data().toArray().length,e=$(e.node()).outerWidth(),l=$(d.s.dt.column(l-d.c.right).header()).offset(),h.left+e>l.left&&(o=r.scrollLeft(),r.scrollLeft(o-(l.left-(h.left+e)))))}),this.s.dt.on("draw",function(){d._addStyles()}),this.s.dt.on("column-reorder",function(){d._addStyles()}),this.s.dt.on("column-visibility",function(){d._addStyles()})},i.version="4.0.0",i.classes={fixedLeft:"dtfc-fixed-left",fixedRight:"dtfc-fixed-right",leftBottomBlocker:"dtfc-left-bottom-blocker",leftTopBlocker:"dtfc-left-top-blocker",rightBottomBlocker:"dtfc-right-bottom-blocker",rightTopBlocker:"dtfc-right-top-blocker",tableFixedLeft:"dtfc-has-left",tableFixedRight:"dtfc-has-right"},i.defaults={i18n:{button:"FixedColumns"},left:1,right:0},i}();export default FixedColumns;export{setJQuery};